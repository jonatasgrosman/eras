<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel" block-ui="projectsManagementBox">

            <div class="x_title">
                <h2>Project</h2>
                <div class="clearfix"></div>
            </div>

            <div class="x_content">
                <select class="form-control" ng-model="selection.project"
                        ng-options="project as project.name for project in projects"
                        ng-change="onChangeSelectedProject()">
                </select>
            </div>
        </div>
    </div>
</div>

<div class="row" ng-show="selection.project">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel" block-ui="documentPackageManagementBox">

            <div class="x_title">
                <div class="row">
                    <div class="col-md-3 col-sm-3 col-xs-3">
                        <h2>Document Package</h2>
                    </div>
                    <div class="col-md-9 col-sm-9 col-xs-9">
                        <div class="float-right" style="width:400px;">
                            <button type="button" class="btn btn-success" ng-click="onShowCreateDocumentPackageModal()"
                                    data-toggle="modal" data-target="#documentPackageModal" title="Add document package">
                                <i class="fa fa-plus"></i>
                            </button>
                            <button type="button" class="btn btn-warning" ng-click="onShowUpdateDocumentPackageModal()"
                                    data-toggle="modal" data-target="#documentPackageModal" title="Edit document package"
                                    ng-disabled="!selection.documentPackage">
                                <i class="fa fa-pencil"></i>
                            </button>
                            <button type="button" class="btn btn-danger" ng-really-message="Are you sure?"
                                    ng-really-click="removeDocumentPackage()" title="Remove document package"
                                    ng-disabled="!selection.documentPackage">
                                <i class="fa fa-trash"></i>
                            </button>
                            <button type="button" class="btn btn-info" ng-click="onShowCollaboratorsModal()"
                                    data-toggle="modal" data-target="#collaboratorsManagementModal" title="Edit document package"
                                    ng-disabled="!selection.documentPackage">
                                <i class="fa fa-users"></i>
                            </button>
                            <button type="button" class="btn btn-info" ng-click="onShowStatisticsModal()"
                                    data-toggle="modal" data-target="#statisticsModal" title="Show statistics"
                                    ng-disabled="!selection.documentPackage">
                                <i class="fa fa-bar-chart"></i>
                            </button>
                            <button type="button" class="btn btn-info" ng-click="onShowCommentsModal()"
                                    data-toggle="modal" data-target="#commentsModal" title="Show comments"
                                    ng-disabled="!selection.documentPackage">
                                <i class="fa fa-commenting"></i>
                            </button>

                            <button type="button" class="btn btn-default"
                                    data-toggle="modal" data-target="#documentImportModal" title="Import documents"
                                    ng-disabled="!selection.documentPackage">
                                <i class="fa fa-upload"></i>
                            </button>

                            <button type="button" class="btn btn-default" ng-click="exportDocumentPackage()"
                                    data-toggle="modal" data-target="#exportModal"
                                    title="Export documents" ng-disabled="!selection.documentPackage">
                                <i class="fa fa-download"></i>
                            </button>
                            <!--
                            <button type="button" class="btn btn-success font-10" ng-click="onShowAddDocumentModal()"
                                    data-toggle="modal" data-target="#documentModal" title="Add document"
                                    ng-show="selection.documentPackage">
                                <i class="fa fa-plus"></i>
                            </button>
                            -->
                        </div>
                        <div class="float-right" style="width:calc(100% - 450px); margin-right:20px;">
                            <select class="form-control" ng-model="selection.documentPackage"
                                    ng-options="documentPackage as documentPackage.name for documentPackage in selection.project.documentPackages"
                                    ng-change="onChangeSelectedDocumentPackage()">
                            </select>
                        </div>
                    </div>
                </div>
                <div class="clearfix"></div>
            </div>

            <div class="x_content" ng-show="selection.documentPackage">

                <div block-ui="documentsManagementBox">

                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12 text-right">
                            <div><span ng-bind="documents.length"></span> of <span ng-bind="documentsSummary.total"></span> documents</div>
                        </div>
                    </div>

                    <div class="row">
                        <div class="col-md-12 col-sm-12 col-xs-12">
                            <table class="table table-striped table-bordered" ng-show="selection.documentPackage">
                                <thead>
                                <tr>
                                    <th>Name</th>
                                    <!--<th>Text</th>-->
                                    <!--<th>Creation date</th>-->
                                    <th>
                                        <select class="form-control" ng-model="selection.documentStatus"
                                                ng-options="status as status.label for status in availableDocumentStatus"
                                                ng-change="onChangeSelectedDocumentStatus()">
                                        </select>
                                    </th>
                                    <th>Agreement</th>
                                    <th style="text-align: center;">
                                        <button type="button" class="btn btn-success" ng-really-message="Are you sure?"
                                                ng-really-click="changeDocumentsStatus('UNCHECKED')" title="Uncheck all documents">
                                            <i class="fa fa-square-o"></i>
                                        </button>
                                        <button type="button" class="btn btn-success" ng-really-message="Are you sure?"
                                                ng-really-click="changeDocumentsStatus('PRECHECKED')" title="Precheck all documents">
                                            <i class="fa fa-minus-square-o"></i>
                                        </button>
                                        <button type="button" class="btn btn-success" ng-really-message="Are you sure?"
                                                ng-really-click="changeDocumentsStatus('CHECKED')" title="check all documents">
                                            <i class="fa fa-check-square-o"></i>
                                        </button>
                                        <button type="button" class="btn btn-danger" ng-really-message="Are you sure?"
                                                ng-really-click="removeDocuments()" title="Remove all documents">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                    </th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="document in documents | orderBy:'id'">
                                    <td ng-bind="document.name"></td>
                                    <!--<td ng-bind="document.text | ellipsis:20"></td>-->
                                    <!--<td ng-bind="document.id | objectIdToDate | date:'yyyy-MM-dd HH:mm:ss'"></td>-->
                                    <td style="text-align: center;">
                                        <div class="btn-group">
                                            <label class="btn" ng-class="(document.status=='UNCHECKED') ? 'btn-success' : 'btn-default'"
                                                   ng-click="updateDocumentStatus(document, 'UNCHECKED')" style="padding: 5px 5px;">
                                                <i class="fa fa-square-o font-10"></i><span class="font-10"> UNCHECKED</span>
                                            </label>
                                            <label class="btn" ng-class="(document.status=='PRECHECKED') ? 'btn-success' : 'btn-default'"
                                                   ng-click="updateDocumentStatus(document, 'PRECHECKED')" style="padding: 5px 5px;">
                                                <i class="fa fa-minus-square-o font-10"></i><span class="font-10"> PRECHECKED</span>
                                            </label>
                                            <label class="btn" ng-class="(document.status=='CHECKED') ? 'btn-success' : 'btn-default'"
                                                   ng-click="updateDocumentStatus(document, 'CHECKED')" style="padding: 5px 5px;">
                                                <i class="fa fa-check-square-o font-10"></i><span class="font-10"> CHECKED</span>
                                            </label>
                                        </div>
                                    </td>
                                    <td ng-bind="document.agreement | number: 3"></td>
                                    <td style="text-align: center;">
                                        <button type="button" class="btn btn-default font-10" ng-click="exportDocument(document)" data-toggle="modal" data-target="#exportModal">
                                            <i class="fa fa-download"></i>
                                        </button>
                                        <button type="button" class="btn btn-info font-10" ng-click="showSubjectDocument(document)">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                        <button type="button" class="btn btn-warning font-10" ng-click="onShowUpdateDocumentModal(document)"
                                                data-toggle="modal" data-target="#documentModal">
                                            <i class="fa fa-pencil"></i>
                                        </button>
                                        <button type="button" class="btn btn-danger font-10" ng-really-message="Are you sure?"
                                                ng-really-click="removeDocument(item)" item="document">
                                            <i class="fa fa-trash"></i>
                                        </button>
                                        <button type="button" class="btn btn-info font-10" ng-click="onShowDocumentCollaborationsModal(document)"
                                                data-toggle="modal" data-target="#documentCollaborationsModal">
                                            <i class="fa fa-users"></i>
                                        </button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                            <nav style="text-align: center;" ng-show="documentsSummary.paginationArray.length > 1">
                                <ul class="pagination">
                                    <li>
                                        <a aria-label="First" ng-click="selection.currentDocumentsPage != 1 && listDocuments(1)">
                                            <span aria-hidden="true">First</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a aria-label="Previous" ng-click="selection.currentDocumentsPage > 1 && listDocuments(selection.currentDocumentsPage-1)">
                                            <span aria-hidden="true">&laquo;</span>
                                        </a>
                                    </li>
                                    <li ng-repeat="i in documentsSummary.paginationArray track by $index">
                                        <a ng-if="i != null" ng-class="(i==selection.currentDocumentsPage) ? 'active' : ''" ng-bind="i" ng-click="listDocuments(i)"></a>
                                        <a ng-if="i == null" ng-bind="'...'"></a>
                                    </li>
                                    <li>
                                        <a aria-label="Next" ng-click="selection.currentDocumentsPage < documentsSummary.totalOfPages && listDocuments(selection.currentDocumentsPage+1)">
                                            <span aria-hidden="true">&raquo;</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a aria-label="Last" ng-click="selection.currentDocumentsPage != documentsSummary.totalOfPages && listDocuments(documentsSummary.totalOfPages)">
                                            <span aria-hidden="true">Last</span>
                                        </a>
                                    </li>
                                </ul>
                            </nav>

                        </div>
                    </div>

                    <!--

                    <div class="divider-dashed"></div>

                    <h4>Statistics</h4>
                    -->

                    <div id="annotatorBox" block-ui="annotatorBoxBlockUI" class="row">

                        <div class="col-md-12 col-sm-12 col-xs-12" ng-show="subjectDocument">
                            <div class="x_panel">

                                <div class="x_title">
                                    <div class="row">
                                        <div class="col-md-6 col-sm-6 col-xs-6">
                                            <h2 style="float:none" ng-bind="subjectDocument.name"></h2>
                                        </div>
                                        <div class="col-md-5 col-sm-5 col-xs-5">
                                            <div class="float-right">
                                                <select class="form-control" ng-model="selection.subjectDocumentMode"
                                                        ng-options="subjectDocumentMode as subjectDocumentMode.label for subjectDocumentMode in subjectDocumentModes"
                                                        ng-change="onChangeSubjectDocumentMode()">
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-md-1 col-sm-1 col-xs-1">
                                            <div class="float-right">
                                                <i class="fa fa-close cursor-pointer" ng-click="hideSubjectDocument()"></i>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="annotatorContainer" style="margin-bottom:50px;"></div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="documentPackageModal" class="modal fade" role="dialog" aria-labelledby="modalTitle" aria-hidden="true" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Document package</h4>
            </div>
            <div class="modal-body">

                <form name="documentPackageForm" class="form-horizontal form-label-left">

                    <div class="form-group">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Name</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" ng-model="documentPackage.name" class="form-control col-md-7 col-xs-12" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Random annotation</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="documentPackage.randomAnnotation" class="green float-left"></switch>
                        </div>
                    </div>

                    <div class="form-group" ng-show="documentPackage.randomAnnotation">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Self-agreement feedback</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="documentPackage.showSelfAgreementFeedback" class="green float-left"></switch>
                            <div style="float:left; width: calc(100% - 150px);">
                                 <input type="number" ng-disabled="!documentPackage.showSelfAgreementFeedback"
                                        ng-model="documentPackage.selfAgreementFeedbackGoal"
                                        class="form-control" min="-1" max="1" step="0.01">
                            </div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Precheck agreement threshold</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="documentPackage.usePrecheckAgreementThreshold" class="green float-left"></switch>
                            <div style="float:left; width: calc(100% - 150px);">
                                 <input type="number" ng-disabled="!documentPackage.usePrecheckAgreementThreshold"
                                        ng-model="documentPackage.precheckAgreementThreshold"
                                        class="form-control" min="0" max="1">
                            </div>
                        </div>
                    </div>

                    <div class="form-group" ng-show="documentPackage.usePrecheckAgreementThreshold">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Use tag agreement</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="documentPackage.useTagAgreement" class="green float-left"></switch>
                        </div>
                    </div>

                    <div class="form-group" ng-show="documentPackage.usePrecheckAgreementThreshold">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Use relation agreement</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="documentPackage.useRelationAgreement" class="green float-left"></switch>
                        </div>
                    </div>

                    <div class="form-group" ng-show="documentPackage.usePrecheckAgreementThreshold">
                        <label class="control-label col-md-5 col-sm-5 col-xs-12">Use connector agreement</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="documentPackage.useConnectorAgreement" class="green float-left"></switch>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-disabled="documentPackageForm.$invalid"
                        ng-click="saveDocumentPackage()" data-dismiss="modal">
                    OK
                </button>
            </div>
        </div>
    </div>
</div>

<div id="collaboratorsManagementModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" block-ui="collaboratorsManagementBox">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">

                <div class="x_panel">

                    <div class="x_title">
                        <form name="groupForm" class="form-horizontal form-label-left">
                            <div class="row">
                                <div class="col-md-2 col-sm-2 col-xs-2">
                                    <h2>Groups</h2>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <input ng-model="group.name" class="form-control" placeholder="Name" required>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <input type="number" ng-model="group.warmUpSize" class="form-control" min="0" placeholder="Warm up size" required>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3">
                                    <input type="number" ng-model="group.reannotationStep" class="form-control" min="0" placeholder="Reannotation step" required>
                                </div>
                                <div class="col-md-1 col-sm-1 col-xs-1">
                                    <button type="button" class="btn btn-success" ng-click="insertGroup()" title="Add group" ng-disabled="groupForm.$invalid">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div class="clearfix"></div>
                    </div>

                    <div class="x_content">

                        <table class="table table-striped table-bordered">
                            <thead>
                            <tr>
                                <th>Name</th>
                                <th>Warm up size</th>
                                <th>Reannotation step</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="group in selection.documentPackage.groups">
                                <td ng-bind="group.name"></td>
                                <td ng-bind="group.warmUpSize"></td>
                                <td ng-bind="group.reannotationStep"></td>
                                <td style="text-align: center;">
                                    <button type="button" class="btn btn-danger font-10" ng-really-message="Are you sure?"
                                            ng-really-click="removeGroup(item)" item="group" title="Remove group"
                                            ng-disabled="group.id == 0">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>

                    </div>
                </div>

                <div class="x_panel">

                    <div class="x_title">
                        <form name="collaboratorForm" class="form-horizontal form-label-left">
                            <div class="row">
                                <div class="col-md-2 col-sm-2 col-xs-2">
                                    <h2>Collaborators</h2>
                                </div>
                                <div class="col-md-5 col-sm-5 col-xs-5">
                                    <input type="email" ng-model="collaborator.email" class="form-control col-md-7 col-xs-12" required>
                                </div>
                                <div class="col-md-4 col-sm-4 col-xs-4">
                                    <select class="form-control" ng-model="collaborator.group" required
                                            ng-options="group as group.name for group in selection.documentPackage.groups">
                                    </select>
                                </div>
                                <div class="col-md-1 col-sm-1 col-xs-1">
                                    <button type="button" class="btn btn-success" ng-click="insertCollaborator()"
                                            ng-disabled="collaboratorForm.$invalid" title="Add collaborator">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div class="clearfix"></div>
                    </div>

                    <div class="x_content">

                        <table class="table table-striped table-bordered" ng-show="selection.documentPackage.collaborators.length">
                            <thead>
                            <tr>
                                <th>Collaborator</th>
                                <th>Group</th>
                                <th></th>
                            </tr>
                            </thead>
                            <tbody>
                            <tr ng-repeat="collaborator in selection.documentPackage.collaborators">
                                <td ng-bind="collaborator.email"></td>
                                <td>
                                    <select class="form-control" ng-model="collaborator.group"
                                            ng-options="group as group.name for group in selection.documentPackage.groups track by group.id"
                                            ng-change="onChangeCollaboratorGroup(collaborator)">
                                    </select>
                                </td>
                                <td style="text-align: center;">
                                    <button type="button" class="btn btn-danger font-10" ng-really-message="Are you sure?"
                                            ng-really-click="removeCollaborator(item)" item="collaborator" title="Remove collaborator">
                                        <i class="fa fa-trash"></i>
                                    </button>
                                    <button type="button" class="btn btn-success font-10" ng-really-message="Are you sure?"
                                            ng-really-click="changeCollaborationsStatus(item, 'UNDONE')"
                                            item="collaborator" title="Undone all collaborations">
                                        UNDONE
                                    </button>
                                    <button type="button" class="btn btn-success font-10" ng-really-message="Are you sure?"
                                            ng-really-click="changeCollaborationsStatus(item, 'DONE')"
                                            item="collaborator" title="Done all collaborations">
                                        DONE
                                    </button>
                                </td>
                            </tr>
                            </tbody>
                        </table>

                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<div id="documentModal" class="modal fade" role="dialog" aria-labelledby="modalTitle" aria-hidden="true" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Document</h4>
            </div>
            <div class="modal-body">

                <form name="documentForm" class="form-horizontal form-label-left">

                    <div class="form-group">
                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Name <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" ng-model="document.name" class="form-control col-md-7 col-xs-12" required>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Metadata
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <button type="button" class="btn btn-success font-10" ng-click="addMetadata()">
                                +
                            </button>
                        </div>
                    </div>

                    <div class="form-group" ng-repeat="metadata in metadataList">
                        <label class="control-label col-md-4 col-sm-4 col-xs-12"></label>
                        <div class="col-md-3 col-sm-3 col-xs-12">
                            <input type="text" ng-model="metadata.key" class="form-control col-md-7 col-xs-12" placeholder="Key">
                        </div>
                        <div class="col-md-3 col-sm-3 col-xs-12">
                            <input type="text" ng-model="metadata.value" class="form-control col-md-7 col-xs-12" placeholder="Value">
                        </div>
                        <div class="col-md-2 col-sm-2 col-xs-12">
                            <button type="button" class="btn btn-danger font-10" ng-click="removeMetadata(metadata)">
                                -
                            </button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Text
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <textarea rows="5" ng-model="document.text" class="form-control col-md-7 col-xs-12"
                                      ng-show="!isInEditMode">
                            </textarea>
                            <div ng-bind="selection.document.text" ng-show="isInEditMode"
                                 style="height:150px; padding:10px; overflow:auto; border:1px solid #ccc;">
                            </div>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-disabled="documentForm.$invalid"
                        ng-click="saveDocument(true)" data-dismiss="modal">
                    Save
                </button>
            </div>
        </div>
    </div>
</div>

<div id="documentImportModal" class="modal fade" role="dialog" aria-labelledby="modalTitle" aria-hidden="true" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Import documents</h4>
            </div>
            <div class="modal-body">

                <form name="documentsImportForm" class="form-horizontal form-label-left">

                    <div class="form-group">
                        <label class="control-label col-md-4 col-sm-4 col-xs-12" for="first-name">Documents file</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="file" multiple="true" ng-file-model="documentsFiles" class="form-control col-md-7 col-xs-12"/>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-4 col-sm-4 col-xs-12">Plain text</label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <switch ng-model="importedDocumentsIsPlainText" class="green"></switch>
                        </div>
                    </div>

                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-disabled="documentsImportForm.$invalid"
                        ng-click="importDocuments()" data-dismiss="modal">
                    OK
                </button>
            </div>
        </div>
    </div>
</div>

<div id="documentCollaborationsModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content" block-ui="documentCollaborationsModalBox">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Collaborators</h4>
            </div>

            <div class="modal-body">

                <table class="table table-striped table-bordered" ng-show="selection.documentPackage.collaborators.length">
                    <thead>
                    <tr>
                        <th>Collaborator</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="collaborator in selection.documentPackage.collaborators">
                        <td ng-bind="collaborator.email"></td>
                        <td style="text-align: center;">
                            <div class="btn-group">
                                <label class="btn" ng-class="(selection.collaborationByCollaboratorEmail[collaborator.email].status=='UNDONE') ? 'btn-success' : 'btn-default'"
                                       ng-click="selection.document.status == 'CHECKED' || selection.document.status == 'PRECHECKED' || updateCollaborationStatus(selection.document, collaborator, 'UNDONE')"
                                       ng-disabled="selection.document.status == 'CHECKED' || selection.document.status == 'PRECHECKED'">
                                    UNDONE
                                </label>
                                <label class="btn" ng-class="(selection.collaborationByCollaboratorEmail[collaborator.email].status=='DONE') ? 'btn-success' : 'btn-default'"
                                       ng-click="selection.document.status == 'CHECKED' || selection.document.status == 'PRECHECKED' || updateCollaborationStatus(selection.document, collaborator, 'DONE')"
                                       ng-disabled="selection.document.status == 'CHECKED' || selection.document.status == 'PRECHECKED'">
                                    DONE
                                </label>
                            </div>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>

<div id="statisticsModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" block-ui="statisticsModalBox">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title">Statistics</h4>
            </div>

            <div class="modal-body">

                <div class="row">
                    <uib-accordion close-others="true">
                        <div uib-accordion-group is-open="status.open">
                            <uib-accordion-heading>
                                Filtered collaborators <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': status.open, 'glyphicon-chevron-right': !status.open}"></i>
                            </uib-accordion-heading>

                            <div class="form-group row" ng-repeat="collaborator in selection.documentPackage.collaborators">
                                <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right"
                                       ng-bind="collaborator.lastName+', '+collaborator.firstName+' ('+collaborator.email+')'"></label>
                                <div class="col-md-2 col-sm-2 col-xs-2">
                                    <switch ng-model="statisticsCollaboratorsFilter[collaborator.email]" class="green float-left"></switch>
                                </div>
                            </div>
                            <div class="form-group row">
                                <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">GSA</label>
                                <div class="col-md-2 col-sm-2 col-xs-2">
                                    <switch ng-model="selection.showGsaStatistics" class="green float-left"></switch>
                                </div>
                            </div>
                            <div class="row text-align-center">
                                <button type="button" class="btn btn-primary" ng-click="filterStatisticsModal()">
                                    Filter
                                </button>
                            </div>
                        </div>
                    </uib-accordion>
                </div>

                <uib-tabset active="0" justified="true" ng-if="!!statisticsMap">
                    <uib-tab index="0" heading="Status" select="loadStatistics('status','all')">
                        <div class="margin-20">
                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">Status of document package</h6>
                                        <div class="clearfix"></div>
                                    </div>
                                    <div class="x_content">
                                        <div id="statusChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </uib-tab>
                    <uib-tab index="1" heading="Token" select="loadStatistics('token','all')">
                        <div class="margin-20">

                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">Distribution of tags and connectors (or absence of both) over the document tokens</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="coverageChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA tokens histogram</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="tokenFrequencyChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </uib-tab>
                    <uib-tab index="2" heading="Tag" select="loadStatistics('tag','all')">
                        <div class="margin-20">
                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">Distribution of tags over the documents</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="tagChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA tags histogram</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="tagFrequencyChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>


                        </div>
                    </uib-tab>

                    <uib-tab index="3" heading="Relation" select="loadStatistics('relation','all')">
                        <div class="margin-20">


                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">Distribution of relations over the documents</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="relationChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="x_panel">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA relation histogram</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="relationFrequencyChart" style="height:300px;"></div>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </uib-tab>
                    <uib-tab index="4" heading="Connector" select="loadStatistics('connector','all')">

                        <div class="row">
                            <div class="x_panel">
                                <div class="x_title text-align-center">
                                    <h6 style="float:none">Distribution of connectors over the documents</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="connectorChart" style="height:300px;"></div>
                                </div>
                            </div>
                        </div>

                        <div class="row">
                            <div class="x_panel">
                                <div class="x_title text-align-center">
                                    <!--<h2 style="float:none">Tag</h2>-->
                                    <h6 style="float:none">Documents frequency by connector count</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="connectorFrequencyChart" style="height:300px;"></div>
                                </div>
                            </div>
                        </div>

                    </uib-tab>
                    <uib-tab index="5" heading="Agreement" select="loadStatistics('agreement','all')">
                        <div class="margin-20">
                            <div class="text-align-center">
                                <div class="btn-group">
                                    <label class="btn" ng-class="(statisticsFilterSelected['agreement']=='all') ? 'btn-success' : 'btn-default'"
                                           ng-click="loadStatistics('agreement','all')" style="padding: 5px 5px;">
                                        <span class="font-10">ALL</span>
                                    </label>
                                    <label class="btn" ng-class="(statisticsFilterSelected['agreement']=='tag') ? 'btn-success' : 'btn-default'"
                                           ng-click="loadStatistics('agreement','tag')" style="padding: 5px 5px;">
                                        <span class="font-10">TAG</span>
                                    </label>
                                    <label class="btn" ng-class="(statisticsFilterSelected['agreement']=='relation') ? 'btn-success' : 'btn-default'"
                                           ng-click="loadStatistics('agreement','relation')" style="padding: 5px 5px;">
                                        <span class="font-10">RELATION</span>
                                    </label>
                                    <label class="btn" ng-class="(statisticsFilterSelected['agreement']=='connector') ? 'btn-success' : 'btn-default'"
                                           ng-click="loadStatistics('agreement','connector')" style="padding: 5px 5px;">
                                        <span class="font-10">CONNECTOR</span>
                                    </label>
                                </div>
                            </div>


                            <div class="x_panel margin-top-10">
                                <div class="x_title text-align-center">
                                    <h6 style="float:none">Agreement in DONE/CHECKED documents</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="agreementChart_all" style="height:500px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                    <div id="agreementChart_tag" style="height:500px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                    <div id="agreementChart_relation" style="height:500px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                    <div id="agreementChart_connector" style="height:500px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                </div>
                            </div>

                            <div ng-show="hasGsaAgreement">

                                <!--
                                <div class="x_panel margin-top-10">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA Agreement in DONE documents</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="agreementByDocChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                        <div id="agreementByDocChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                        <div id="agreementByDocChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                        <div id="agreementByDocChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                    </div>
                                </div>
                                <div class="x_panel margin-top-10">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA agreement standard deviation in DONE documents</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="standardDeviationAgreementByDocChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                        <div id="standardDeviationAgreementByDocChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                        <div id="standardDeviationAgreementByDocChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                        <div id="standardDeviationAgreementByDocChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                    </div>
                                </div>
                                -->

                                <div class="x_panel margin-top-10">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA agreement in DONE documents over time</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="agreementOverTimeChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                        <div id="agreementOverTimeChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                        <div id="agreementOverTimeChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                        <div id="agreementOverTimeChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                    </div>
                                </div>
                                <div class="x_panel margin-top-10">
                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">GSA agreement standard deviation in DONE documents over time</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">
                                        <div id="standardDeviationAgreementOverTimeChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                        <div id="standardDeviationAgreementOverTimeChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                        <div id="standardDeviationAgreementOverTimeChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                        <div id="standardDeviationAgreementOverTimeChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                    </div>
                                </div>
                            </div>

                            <!--

                            <div class="x_panel margin-top-10">
                                <div class="x_title text-align-center">
                                    <h6 style="float:none">Self-agreement in DONE documents</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="selfAgreementByDocChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                    <div id="selfAgreementByDocChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                    <div id="selfAgreementByDocChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                    <div id="selfAgreementByDocChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                </div>
                            </div>
                            <div class="x_panel margin-top-10">
                                <div class="x_title text-align-center">
                                    <h6 style="float:none">Self-agreement standard deviation in DONE documents</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="standardDeviationSelfAgreementByDocChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                    <div id="standardDeviationSelfAgreementByDocChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                    <div id="standardDeviationSelfAgreementByDocChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                    <div id="standardDeviationSelfAgreementByDocChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                </div>
                            </div>
                            -->

                            <div class="x_panel margin-top-10">
                                <div class="x_title text-align-center">
                                    <h6 style="float:none">Self-agreement in DONE documents over time</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="selfAgreementOverTimeChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                    <div id="selfAgreementOverTimeChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                    <div id="selfAgreementOverTimeChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                    <div id="selfAgreementOverTimeChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                </div>
                            </div>
                            <div class="x_panel margin-top-10">
                                <div class="x_title text-align-center">
                                    <h6 style="float:none">Self-agreement standard deviation in DONE documents over time</h6>
                                    <div class="clearfix"></div>
                                </div>

                                <div class="x_content">
                                    <div id="standardDeviationSelfAgreementOverTimeChart_all" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='all'"></div>
                                    <div id="standardDeviationSelfAgreementOverTimeChart_tag" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='tag'"></div>
                                    <div id="standardDeviationSelfAgreementOverTimeChart_relation" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='relation'"></div>
                                    <div id="standardDeviationSelfAgreementOverTimeChart_connector" style="height:400px;" ng-show="statisticsFilterSelected['agreement']=='connector'"></div>
                                </div>
                            </div>

                        </div>
                    </uib-tab>
                    <uib-tab index="6" heading="Summary" select="loadStatistics('summary')">
                        <div class="margin-20">
                            <!--<div ui-grid="{data: statisticsSummary}"></div>-->

                            <div class="row">
                                <div class="col-md-9 col-sm-9 col-xs-9">
                                    <h2>Collaborations</h2>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3 text-align-right">
                                    <button type="button" class="btn btn-default" ng-click="downloadTable('summaryCollaborations', 'Collaborations Summary')" title="Download table">
                                        <i class="fa fa-download"></i>
                                    </button>
                                </div>
                            </div>
                            <table class="table table-striped table-bordered" id="summaryCollaborations">
                                <thead>
                                <tr>
                                    <th>Collaborator</th>
                                    <th>Time spent</th>
                                    <th>Time spent AVG</th>
                                    <th>Time spent SD</th>
                                    <th># Views</th>
                                    <th># Views AVG</th>
                                    <th># Views SD</th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="row in collaboratorStatisticsSummary">
                                    <td ng-bind="row.collaborator"></td>
                                    <td ng-bind="row.elapsedTime"></td>
                                    <td ng-bind="row.elapsedTimeAvg"></td>
                                    <td ng-bind="row.elapsedTimeSd"></td>
                                    <td ng-bind="row.numberOfViews | number: 2"></td>
                                    <td ng-bind="row.numberOfViewsAvg | number: 2"></td>
                                    <td ng-bind="row.numberOfViewsSd | number: 2"></td>
                                </tr>
                                </tbody>
                            </table>

                            <div class="row">
                                <div class="col-md-9 col-sm-9 col-xs-9">
                                    <h2>Documents</h2>
                                </div>
                                <div class="col-md-3 col-sm-3 col-xs-3 text-align-right">
                                    <button type="button" class="btn btn-default" ng-click="downloadTable('summaryDocuments', 'Documents Summary')" title="Download table">
                                        <i class="fa fa-download"></i>
                                    </button>
                                </div>
                            </div>
                            <table class="table table-striped table-bordered" id="summaryDocuments">
                                <thead>
                                <tr>
                                    <th class="cursor-pointer" ng-click="sortBy('name')">Name</th>
                                    <th class="cursor-pointer" ng-click="sortBy('numberOfTokens')"># Tokens</th>
                                    <th class="cursor-pointer" ng-click="sortBy('timeSpent')">Time spent</th>
                                    <th class="cursor-pointer" ng-click="sortBy('timeSpentMean')">Time spent AVG</th>
                                    <th class="cursor-pointer" ng-click="sortBy('timeSpentStd')">Time spent SD</th>
                                    <th class="cursor-pointer" ng-click="sortBy('numberOfViews')"># Views</th>
                                    <th class="cursor-pointer" ng-click="sortBy('numberOfViewsMean')"># Views AVG</th>
                                    <th class="cursor-pointer" ng-click="sortBy('numberOfViewsStd')"># Views SD</th>
                                    <th></th>
                                </tr>
                                </thead>
                                <tbody>
                                <tr ng-repeat="row in statisticsSummary | orderBy:statisticsSummarySortName:statisticsSummarySortReverse">
                                    <td ng-bind="row.name"></td>
                                    <td ng-bind="row.numberOfTokens"></td>
                                    <td ng-bind="row.elapsedTime"></td>
                                    <td ng-bind="row.elapsedTimeAvg"></td>
                                    <td ng-bind="row.elapsedTimeSd"></td>
                                    <td ng-bind="row.numberOfViews"></td>
                                    <td ng-bind="row.numberOfViewsAvg | number: 2"></td>
                                    <td ng-bind="row.numberOfViewsSd | number: 2"></td>
                                    <td>
                                        <button type="button" class="btn btn-info font-10" ng-click="loadModalDocument(row.id)"
                                                data-toggle="modal" data-target="#showDocumentModal">
                                            <i class="fa fa-eye"></i>
                                        </button>
                                    </td>
                                </tr>
                                </tbody>
                            </table>

                        </div>
                    </uib-tab>

                    <uib-tab index="7" heading="Words" select="loadStatistics('words','all')">
                        <div class="margin-20">

                            <div class="row">
                                <div class="x_panel">

                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">Tag</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">

                                        <div class="row margin-bottom-10">

                                            <div class="col-md-4 col-sm-4 col-xs-12">
                                                Tag:
                                                <select class="form-control font-10" ng-model="selection.wordCloudTag"
                                                        ng-options="tag for tag in selection.availableWordCloudTags"
                                                        ng-change="onChangeWordcloudParameter('TAG')">
                                                </select>
                                            </div>

                                            <div class="col-md-4 col-sm-4 col-xs-12">
                                                Type:
                                                <select class="form-control font-10" ng-model="selection.wordCloudTagType"
                                                        ng-options="type.value as type.label for type in availableWordCloudTypes['TAG']"
                                                        ng-change="onChangeWordcloudParameter('TAG')">
                                                </select>
                                            </div>

                                            <div class="col-md-4 col-sm-4 col-xs-12">
                                                Dimension:
                                                <select class="form-control font-10" ng-model="selection.wordCloudTagDimension"
                                                        ng-options="dimension.value as dimension.label for dimension in availableWordCloudDimensions"
                                                        ng-change="onChangeWordcloudParameter('TAG')">
                                                </select>
                                            </div>

                                        </div>

                                        <uib-tabset active="0" justified="true">
                                            <uib-tab index="0" heading="WordCloud">
                                                <div class="margin-20" style="border: 1px solid lightgray; width:760px; height:400px;">
                                                    <div id="tagwordcloud"></div>
                                                </div>
                                            </uib-tab>
                                            <uib-tab index="1" heading="Table">
                                                <!--
                                                <div class="row">
                                                    <div class="col-md-9 col-sm-9 col-xs-9">
                                                        <h2>Word frequency</h2>
                                                    </div>
                                                    <div class="col-md-3 col-sm-3 col-xs-3 text-align-right">
                                                        <button type="button" class="btn btn-default" ng-click="downloadTable('wordFrequencyTable', 'Word frequency')" title="Download table">
                                                            <i class="fa fa-download"></i>
                                                        </button>
                                                    </div>
                                                </div>
                                                -->
                                                <div class="margin-20" style="border: 1px solid lightgray; width:760px; height:400px; overflow:auto;">
                                                    <table id="wordFrequencyTable" class="table table-striped table-bordered">
                                                        <tr>
                                                            <th>Words</th>
                                                            <th>Occurrences</th>
                                                        </tr>
                                                        <tr ng-repeat="entry in tagWordEntries">
                                                            <td ng-bind="entry.text"></td>
                                                            <td ng-bind="entry.size"></td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </uib-tab>
                                            <uib-tab index="2" heading="Curve" select="onChangeWordcloudParameter('TAG')">
                                                <div class="margin-20" style="border: 1px solid lightgray; width:760px; height:400px;">
                                                    <div class="margin-10">
                                                        <div id="tagFrequencyCurve" style="height:380px;"></div>
                                                    </div>
                                                </div>
                                            </uib-tab>
                                        </uib-tabset>

                                    </div>
                                </div>
                            </div>

                            <div class="row">
                                <div class="x_panel">

                                    <div class="x_title text-align-center">
                                        <h6 style="float:none">Relation</h6>
                                        <div class="clearfix"></div>
                                    </div>

                                    <div class="x_content">

                                        <div class="row margin-bottom-10">

                                            <div class="col-md-4 col-sm-4 col-xs-12">
                                                Relation:
                                                <select class="form-control font-10" ng-model="selection.wordCloudRelation"
                                                        ng-options="relation for relation in selection.availableWordCloudRelations"
                                                        ng-change="onChangeWordcloudParameter('RELATION')">
                                                </select>
                                            </div>

                                            <div class="col-md-4 col-sm-4 col-xs-12">
                                                Type:
                                                <select class="form-control font-10" ng-model="selection.wordCloudRelationType"
                                                        ng-options="type.value as type.label for type in availableWordCloudTypes['RELATION']"
                                                        ng-change="onChangeWordcloudParameter('RELATION')">
                                                </select>
                                            </div>

                                            <div class="col-md-4 col-sm-4 col-xs-12">
                                                Dimension:
                                                <select class="form-control font-10" ng-model="selection.wordCloudRelationDimension"
                                                        ng-options="dimension.value as dimension.label for dimension in availableWordCloudDimensions"
                                                        ng-change="onChangeWordcloudParameter('RELATION')">
                                                </select>
                                            </div>

                                        </div>

                                        <uib-tabset active="0" justified="true">
                                            <uib-tab index="0" heading="WordCloud">
                                                <div class="margin-20" style="border: 1px solid lightgray; width:760px; height:400px;">
                                                    <div id="relationwordcloud"></div>
                                                </div>
                                            </uib-tab>
                                            <uib-tab index="1" heading="Table">
                                                <div class="margin-20" style="border: 1px solid lightgray; width:760px; height:400px; overflow:auto;">
                                                    <table class="table table-striped table-bordered">
                                                        <tr>
                                                            <th>Words</th>
                                                            <th>Occurrences</th>
                                                        </tr>
                                                        <tr ng-repeat="entry in relationWordEntries">
                                                            <td ng-bind="entry.text"></td>
                                                            <td ng-bind="entry.size"></td>
                                                        </tr>
                                                    </table>
                                                </div>
                                            </uib-tab>
                                            <uib-tab index="2" heading="Curve" select="onChangeWordcloudParameter('RELATION')">
                                                <div class="margin-20" style="border: 1px solid lightgray; width:760px; height:400px;">
                                                    <div class="margin-10">
                                                        <div id="relationFrequencyCurve" style="height:380px;"></div>
                                                    </div>
                                                </div>
                                            </uib-tab>
                                        </uib-tabset>

                                    </div>
                                </div>
                            </div>

                        </div>
                    </uib-tab>

                </uib-tabset>

            </div>
        </div>
    </div>
</div>


<div id="commentsModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" block-ui="commentsModalBox">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
            </div>

            <div class="modal-body">
                <div class="row" ng-repeat="doc in documentPackageComments">
                    <h4 class="float-left">{{doc.name}}</h4>
                    <button type="button" class="btn btn-info font-10 float-right" ng-click="loadModalDocument(doc.id)"
                            data-toggle="modal" data-target="#showDocumentModal">
                        <i class="fa fa-eye"></i>
                    </button>
                    <table class="table table-striped table-bordered">
                        <tr ng-repeat="collaboration in doc.collaborations">
                            <td style="width:30%" ng-bind="collaboration.collaboratorLabel"></td>
                            <td style="width:70%" ng-bind="collaboration.comments"></td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="showDocumentModal" class="modal fade" tabindex="2" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content" block-ui="documentModalBox">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
            </div>

            <div class="modal-body">
                <div class="row">
                    <div id="modalAnnotatorContainer"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="exportModal" class="modal fade" role="dialog" aria-labelledby="modalTitle" aria-hidden="true" tabindex="-1">
    <div class="modal-dialog modal-md">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">×</span></button>
            </div>
            <div class="modal-body">

                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">UNCHECKED</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeUnchecked" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">PRECHECKED</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includePrechecked" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">CHECKED</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeChecked" class="green float-left"></switch>
                    </div>
                </div>

                <hr/>

                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">METADATA</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeMetadata" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">TEXT</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeText" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">COLLABORATION</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeCollaboration" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">STATUS</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeStatus" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">DESCRIPTION</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeDescription" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">LOG</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeLog" class="green float-left"></switch>
                    </div>
                </div>
                <div class="form-group row">
                    <label class="control-label col-md-6 col-sm-6 col-xs-6 text-align-right">COMMENTS</label>
                    <div class="col-md-6 col-sm-6 col-xs-6">
                        <switch ng-model="exportDetails.includeComments" class="green float-left"></switch>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-click="export()" data-dismiss="modal">
                    Export
                </button>
            </div>
        </div>
    </div>
</div>

