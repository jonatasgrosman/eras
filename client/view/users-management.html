<div class="row">
    <div class="col-md-12 col-sm-12 col-xs-12">
        <div class="x_panel" block-ui="userManagementBox">

            <div class="x_title">
                <h2>Users</h2>
                <ul class="nav navbar-right panel_toolbox">
                    <button type="button" class="btn btn-success" ng-click="initAddUserMode()"
                            data-toggle="modal" data-target="#userModal" title="Add user">
                        <i class="fa fa-plus"></i>
                    </button>
                </ul>
                <div class="clearfix"></div>
            </div>

            <div class="x_content">

                <table class="table table-striped table-bordered">
                    <thead>
                    <tr>
                        <th>Email</th>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Role</th>
                        <th></th>
                    </tr>
                    </thead>
                    <tbody>
                    <tr ng-repeat="user in users | filter:{ role: '!MODULE', email: '!'+loggedUser.email}">
                        <td ng-bind="user.email"></td>
                        <td ng-bind="user.firstName"></td>
                        <td ng-bind="user.lastName"></td>
                        <td ng-bind="user.role"></td>
                        <td style="text-align: center;">
                            <button type="button" class="btn btn-warning font-10" ng-click="initEditUserMode(user)"
                                    data-toggle="modal" data-target="#userModal" title="Edit user">
                                <i class="fa fa-pencil"></i>
                            </button>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </div>
    </div>
</div>

<div id="userModal" class="modal fade" tabindex="-1" role="dialog" aria-hidden="true">
    <div class="modal-dialog modal-md">
        <div class="modal-content">

            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">Ã—</span></button>
                <h4 class="modal-title">User</h4>
            </div>
            <div class="modal-body">

                <form name="userForm" class="form-horizontal form-label-left">

                    <div class="form-group" ng-show="!isEditMode()">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">Email <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="email" ng-model="user.email" class="form-control col-md-7 col-xs-12" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="first-name">First Name <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" ng-model="user.firstName" class="form-control col-md-7 col-xs-12" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12" for="last-name">Last Name <span class="required">*</span>
                        </label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <input type="text" ng-model="user.lastName" class="form-control col-md-7 col-xs-12" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="control-label col-md-3 col-sm-3 col-xs-12">Role <span class="required">*</span></label>
                        <div class="col-md-6 col-sm-6 col-xs-12">
                            <select class="form-control" ng-model="user.role" ng-options="role for role in roles" required></select>
                        </div>
                    </div>

                </form>

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" ng-disabled="userForm.$invalid"
                        ng-click="saveUser()" data-dismiss="modal">
                    Save
                </button>
            </div>

        </div>
    </div>
</div>